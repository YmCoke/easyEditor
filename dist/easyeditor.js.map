{"version":3,"sources":["webpack://easyeditor/./src/index.ts","webpack://easyeditor/./src/helper.ts","webpack://easyeditor/./src/menu.ts","webpack://easyeditor/./src/text.ts","webpack://easyeditor/webpack/bootstrap"],"names":["text","children","command","initDom","editor","config","menuDom","document","createElement","style","width","height","border","display","padding","boxSizing","alignItems","menuItems","i","menuItemDom","icon","backgroundImage","innerText","lineHeight","cursor","margin","position","childWrapperDom","left","top","background","length","child","listStyle","borderTop","setAttribute","appendChild","addEventListener","e","target","getAttribute","cacheRange","selection","window","getSelection","removeAllRanges","addRange","console","log","indexOf","execCommand","split","commandName","arg","handleCommand","textDom","contentEditable","outline","dom","getRangeAt","initEvent","clear","__webpack_module_cache__","__webpack_require__","moduleId","exports","module","__webpack_modules__","menuConfig","generateMenuItems","textConfig","Error","this","$containerDom","create","setMenuArea","setTextArea","$menuDom","menu","initText","$textDom","EasyEditor"],"mappings":"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","file":"easyeditor.js","sourcesContent":["import initMenu, { IMenuConfig, IMenu } from './menu';\r\nimport { initText, ITextConfig, IText } from './text';\r\nimport { generateMenuItems } from './helper';\r\n\r\ninterface IEditorConfig {\r\n    menuConfig: IMenuConfig\r\n    textConfig: ITextConfig\r\n}\r\n\r\nexport default class EasyEditor {\r\n\r\n    private $containerDom: HTMLElement // 最外层包裹的dom元素, 同样也是由用户传进来的元素\r\n    private $menuDom: HTMLElement // 菜单栏Dom元素\r\n    private $textDom: HTMLElement // 编辑区Dom元素\r\n\r\n    public menu: IMenu // 与菜单相关的一系列功能函数\r\n    public text: IText // 与编辑区相关的一系列功能函数\r\n\r\n    public config: IEditorConfig = {\r\n        menuConfig: {\r\n            // 菜单栏配置: 如宽高, 边框样式, 以及菜单项等配置信息\r\n            width: \"100%\",\r\n            height: \"100%\",\r\n            border: \"1px solid #666\",\r\n            menuItems: generateMenuItems()\r\n        },\r\n        textConfig: {\r\n            // 编辑区配置: 宽高, 背景颜色, 边框等样式\r\n        }\r\n    }\r\n\r\n    public cacheRange: Range // 缓存用户选中区域\r\n\r\n    constructor(dom: HTMLElement) {\r\n        if (!dom) {\r\n            throw new Error(\"传入Dom为空!!\");\r\n        }\r\n        this.$containerDom = dom;\r\n    }\r\n\r\n    public create(config?: IEditorConfig) {\r\n        if(config) this.config = config;\r\n        this.setMenuArea();\r\n        this.setTextArea();\r\n\r\n        document.execCommand(\"defaultParagraphSeparator\", false, \"p\");\r\n    }\r\n\r\n    private setMenuArea() {\r\n        [this.$menuDom, this.menu] = initMenu(this, this.config.menuConfig);\r\n        this.$containerDom.appendChild(this.$menuDom);\r\n    }\r\n\r\n    private setTextArea() {\r\n        [this.$textDom, this.text] = initText(this, this.config.textConfig);\r\n        this.$containerDom.appendChild(this.$textDom);\r\n    }\r\n}\r\n\r\n\r\ndeclare var window: Window & { EasyEditor: any };\r\nwindow.EasyEditor = EasyEditor;\r\n","import { IMenuItem } from './menu';\r\n\r\nexport function generateMenuItems(): IMenuItem[] {\r\n    return [\r\n        {\r\n            text: \"H\",\r\n            children: [\r\n                { text: '一级标题', command: 'fontSize-6' },\r\n                { text: '二级标题', command: 'fontSize-5' },\r\n                { text: '三级标题', command: 'fontSize-4' },\r\n                { text: '四级标题', command: 'fontSize-3' },\r\n                { text: '五级标题', command: 'fontSize-2' },\r\n                { text: '六级标题', command: 'fontSize-1' }\r\n            ]\r\n        },\r\n        {\r\n            text: \"B\",\r\n            command: \"bold\"\r\n        },\r\n        {\r\n            text: \"C\",\r\n            children: [\r\n                {text: \"red\", command: \"foreColor-red\"},\r\n                {text: \"blue\", command: \"foreColor-blue\"},\r\n                {text: \"green\", command: \"foreColor-green\"},\r\n            ]\r\n        }\r\n    ]\r\n}","import EasyEditor from './index';\r\n\r\nexport interface IMenuItemChild {\r\n    text: string\r\n    command: string\r\n}\r\n\r\nexport interface IMenuItem {\r\n    icon?: string // icon图标的url\r\n    text?: string // 字体\r\n    width?: string // 宽度\r\n    height?: string // 高度\r\n    command?: string // 命令\r\n    children?: IMenuItemChild[] // 二级菜单项\r\n}\r\n\r\nexport interface IMenuConfig {\r\n    width?: string\r\n    height?: string\r\n    border?: string\r\n    menuItems?: IMenuItem[]\r\n}\r\n\r\nexport interface IMenu {\r\n    width: (x: number) => void\r\n    height: (x: number) => void\r\n}\r\n\r\nexport default function initMenu(editor: EasyEditor, config: IMenuConfig): [HTMLElement, IMenu] {\r\n    return [initDom(editor, config), initApi(editor, config)];\r\n}\r\n\r\nfunction initDom(editor: EasyEditor, config: IMenuConfig): HTMLElement {\r\n    const menuDom: HTMLElement = document.createElement(\"div\");\r\n    menuDom.style.width = config.width || \"100%\";\r\n    menuDom.style.height = config.height || \"20px\";\r\n    menuDom.style.border = config.border || \"1px solid #666\";\r\n    menuDom.style.display = \"flex\";\r\n    menuDom.style.padding = \"6px 10px\";\r\n    menuDom.style.boxSizing = \"border-box\";\r\n    menuDom.style.alignItems = \"center\";\r\n\r\n    const menuItems = config.menuItems;\r\n    if (menuItems) {\r\n        for (let i = 0; i < menuItems.length; ++i) {\r\n            const menuItemDom = document.createElement(\"div\");\r\n            if (menuItems[i].icon) {\r\n                menuItemDom.style.backgroundImage = menuItems[i].icon;\r\n            }\r\n            else {\r\n                menuItemDom.innerText = menuItems[i].text;\r\n            }\r\n            menuItemDom.style.width = menuItems[i].width || \"20px\";\r\n            menuItemDom.style.height = menuItems[i].height || \"20px\";\r\n            menuItemDom.style.lineHeight = menuItems[i].height || \"20px\";\r\n            menuItemDom.style.cursor = \"pointer\";\r\n            menuItemDom.style.margin = \"0 5px\";\r\n            menuItemDom.style.position = \"relative\";\r\n\r\n            const children = menuItems[i].children;\r\n            let childWrapperDom: HTMLElement;\r\n            if (children) {\r\n                childWrapperDom = document.createElement(\"ul\");\r\n                childWrapperDom.style.display = \"none\";\r\n                childWrapperDom.style.width = \"100px\";\r\n                childWrapperDom.style.position = \"absolute\";\r\n                childWrapperDom.style.left = \"-4px\";\r\n                childWrapperDom.style.top = \"28px\";\r\n                childWrapperDom.style.margin = \"0\";\r\n                childWrapperDom.style.padding = \"0px\";\r\n                childWrapperDom.style.boxSizing = \"border-box\";\r\n                childWrapperDom.style.background = \"#fff\";\r\n\r\n                for (let i = 0; i < children.length; ++i) {\r\n                    const child = document.createElement(\"li\");\r\n                    child.style.listStyle = \"none\";\r\n                    child.style.border = \"1px solid #666\";\r\n                    child.style.borderTop = \"none\";\r\n                    child.style.padding = \"2px\";\r\n                    child.innerText = children[i].text;\r\n                    child.setAttribute(\"command\", children[i].command);\r\n                    childWrapperDom.appendChild(child);\r\n                }\r\n                menuItemDom.appendChild(childWrapperDom);\r\n\r\n                menuItemDom.addEventListener('click', function() {\r\n                    if(childWrapperDom.style.display == \"block\") \r\n                        childWrapperDom.style.display = \"none\";\r\n                    else \r\n                        childWrapperDom.style.display = \"block\"\r\n                })\r\n            }\r\n            else menuItemDom.setAttribute(\"command\", menuItems[i].command);\r\n            menuDom.appendChild(menuItemDom);\r\n        }\r\n    }\r\n\r\n    menuDom.addEventListener('click', function(e) {\r\n        const targetDom = e.target as HTMLElement;\r\n        const command = targetDom.getAttribute('command');\r\n        if(!command) return ;\r\n        if(editor.cacheRange) {\r\n            const selection = window.getSelection();\r\n            selection.removeAllRanges();\r\n            selection.addRange(editor.cacheRange);\r\n            handleCommand(command);\r\n        }\r\n    })\r\n\r\n    return menuDom;\r\n\r\n    function handleCommand(command: string) {\r\n        console.log(command);\r\n        if(command.indexOf(\"-\") == -1) document.execCommand(command);\r\n        else {\r\n            const [commandName, arg] = command.split(\"-\");\r\n            document.execCommand(commandName, false, arg); \r\n        }\r\n    }\r\n}\r\n\r\n\r\n\r\nfunction initApi(editor: EasyEditor, config: IMenuConfig): IMenu {\r\n    const menu: IMenu = {\r\n        width() { },\r\n        height() { },\r\n    };\r\n\r\n    return menu;\r\n}","import EasyEditor from \"./index\";\r\n\r\nexport interface ITextConfig {\r\n    width?: string\r\n    height?: string\r\n    padding?: string\r\n    border?: string\r\n    lineHeight?: string\r\n}\r\n\r\nexport interface IText {\r\n    width: (x: number) => void\r\n    height: (x: number) => void\r\n    clear: () => void\r\n}\r\n\r\nexport function initText(editor: EasyEditor, config: ITextConfig): [HTMLElement, IText] {\r\n    return [initDom(editor, config), initApi(editor, config)];\r\n}\r\n\r\nfunction initDom(editor: EasyEditor, config: ITextConfig): HTMLElement {\r\n    const textDom = document.createElement(\"div\");\r\n\r\n    textDom.style.width = config.width || \"100%\";\r\n    textDom.style.height = config.height || \"500px\";\r\n    textDom.style.padding = config.padding || \"6px 10px\";\r\n    textDom.style.border = config.border || \"1px solid #666\";\r\n    textDom.style.lineHeight = config.lineHeight || \"1\";\r\n\r\n    textDom.contentEditable = \"true\";\r\n    textDom.style.boxSizing = \"border-box\";\r\n    textDom.style.outline = \"none\";\r\n\r\n    initEvent(textDom, editor);\r\n    return textDom;\r\n}\r\n\r\nfunction initEvent(dom: HTMLElement,editor: EasyEditor) {\r\n    // 绑定鼠标抬起缓存range事件\r\n    dom.addEventListener(\"mouseup\", function(e) {\r\n        editor.cacheRange = window.getSelection().getRangeAt(0);\r\n    })\r\n}\r\n\r\nfunction initApi(editor: EasyEditor, config: ITextConfig): IText {\r\n    const text: IText = {\r\n        width() {},\r\n        height() {},\r\n        clear() {}\r\n    };\r\n\r\n    return text;\r\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n"],"sourceRoot":""}